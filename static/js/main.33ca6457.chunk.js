(this["webpackJsonpcompute-nodes-example"]=this["webpackJsonpcompute-nodes-example"]||[]).push([[0],{140:function(t,e,n){t.exports=n(157)},141:function(t,e,n){},142:function(t,e,n){},156:function(t,e,n){},157:function(t,e,n){"use strict";n.r(e);n(141),n(142),n(143);var r,i=n(0),o=n.n(i),a=n(35),s=n.n(a),u=n(7),c=n(11),l=n(9),h=n(8),d=n(10),p=n(55),f=n(164),v=n(163),m=n(74),y=n(73),g=n(15),b=n.n(g),w=n(12),x=n(167),O=n(168),_=n(16),N=b.a.mark(Qt);function E(t,e){return t+"-"+e}function k(t){var e=t.split("-");return{nodeId:e[0],pin:e[1]}}function j(t,e){return void 0===e&&(e=16),Math.round(t/e)*e}function C(t){for(var e=0;e<20&&t;){if(t instanceof HTMLInputElement||t instanceof HTMLButtonElement)return!1;if(t.classList&&t.classList.contains("node-noglobals"))return!1;t=t.parentNode,e++}return!0}function I(t){return E(t.node,t.pin)}!function(t){t.VISUAL_NODE="VISUAL_NODE"}(r||(r={}));var T=function(t){this.id=t.id,this.type=t.type,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.inputPins=t.inputPins||{}};function P(){return(P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function D(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var S=function(){function t(){this.nodeTypes={}}var e=t.prototype;return e.registerType=function(t){this.nodeTypes[t.Type]=t},e.instantiateNewNode=function(t,e){var n,r,i=this.nodeTypes[t];e.id||(e=P({},e,{id:this.generateId()})),e.width=Math.max(e.width||160,(null===(n=i.MinDimensions)||void 0===n?void 0:n.width)||160),e.height=Math.max(e.height||112,(null===(r=i.MinDimensions)||void 0===r?void 0:r.height)||112);var o=i.Construct(e);return o.type=i.Type,o},e.generateId=function(){return Array(16).fill(0).map((function(){return String.fromCharCode(Math.floor(26*Math.random())+97)})).join("")+Date.now().toString(24)},e.renderNode=function(t){return this.nodeTypes[t.type].Render(t)},e.getNodeTypeInfo=function(t){return this.nodeTypes[t]},t}(),R=function(){function t(t,e){this.registry=t,this.nodes=e||{},this.handlers={},this.linksByTo={},this.linksByFrom={},this.setupNodes(this.nodes)}var e=t.prototype;return e.restoreNodes=function(t){return this.setupNodes(t),this.linksByTo},e.on=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},e.unbind=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t]=this.handlers[t].filter((function(t){return t!==e}))},e.getNodes=function(){return this.nodes},e.getConnections=function(){return this.linksByTo},e.render=function(t){var e,n,r=this.registry.getNodeTypeInfo(t.type);return this.registry.renderNode(P({},t,{resolver:this,resolvedData:this.resolveNode(t),minWidth:null===(e=r.MinDimensions)||void 0===e?void 0:e.width,minHeight:null===(n=r.MinDimensions)||void 0===n?void 0:n.height}))},e.createNode=function(t,e){var n,r=P({},e),i=this.registry.instantiateNewNode(t,r);return this.nodes=P({},this.nodes,((n={})[i.id]=i,n)),this.issueEvent({type:"node-new",nodes:this.nodes,node:i}),i},e.destroyNode=function(t){var e=this,n=this.nodes[t];if(n){n.inputPins&&Object.keys(n.inputPins).forEach((function(n){return e.internalDestroyConnection(E(t,n))}));var r=this.registry.getNodeTypeInfo(n.type).OutputFormat;return r&&Object.keys(r).forEach((function(n){e.internalDestroyConnection(E(t,n))})),this.nodes=P({},this.nodes),delete this.nodes[t],this.issueEvent({type:"node-delete",nodes:this.nodes,connections:this.linksByTo,node:n}),!0}return!1},e.forNodeOutputConnections=function(t,e){var n=this,r=this.registry.getNodeTypeInfo(this.nodes[t].type);r.OutputFormat&&Object.keys(r.OutputFormat).forEach((function(r){var i;null===(i=n.linksByFrom[E(t,r)])||void 0===i||i.forEach((function(t){e(t.to.node,t.to.pin,t.from.pin)}))}))},e.updateNode=function(t,e,n){var r,i=P({},this.nodes[t],e);this.nodes=P({},this.nodes,((r={})[t]=i,r)),(null===n||void 0===n?void 0:n.invalidateOutput)&&this.invalidateNodeOutput(t),(null===n||void 0===n?void 0:n.moveTop)&&(delete this.nodes[t],this.nodes[t]=i),this.issueEvent(P({type:"node-update",nodes:this.nodes,connections:this.linksByTo,node:i},n))},e.isValidInputPin=function(t){var e=k(t),n=e.nodeId,r=e.pin;if(n in this.nodes){var i=this.registry.getNodeTypeInfo(this.nodes[n].type).InputFormat;if(i&&r in i)return!0}return!1},e.isValidOutputPin=function(t){var e=k(t),n=e.nodeId,r=e.pin;if(n in this.nodes){var i=this.registry.getNodeTypeInfo(this.nodes[n].type).OutputFormat;if(i&&r in i)return!0}return!1},e.createPinConnection=function(t,e){var n,r;if(this.createsCycle(t,e))return!1;if(!this.isValidOutputPin(t)||!this.isValidInputPin(e))return!1;this.nodes=P({},this.nodes),this.linksByTo=P({},this.linksByTo),this.linksByFrom=P({},this.linksByFrom),this.internalDestroyConnection(e);var i=k(e),o=this.buildNewConnection(t,i.nodeId,i.pin),a=this.nodes[i.nodeId],s=P({},a,{inputPins:P({},a.inputPins,(n={},n[i.pin]=t,n))});this.nodes=P({},this.nodes,((r={})[a.id]=s,r));var u=this.linksByFrom[t];return u?u.push(o):this.linksByFrom[t]=[o],this.linksByTo[e]=o,this.invalidateNodeOutput(i.nodeId),this.issueEvent({type:"connection-new",nodes:this.nodes,connections:this.linksByTo,connection:o}),o},e.internalDestroyConnection=function(t){var e=this;if(t in this.linksByTo){var n=this.linksByTo[t],r=I(n.from),i=this.linksByFrom[r];this.linksByFrom[r]=i.filter((function(e){return I(e.to)!==t})),delete this.linksByTo[I(n.to)],this.nodes[n.to.node].inputPins=P({},this.nodes[n.to.node].inputPins),delete this.nodes[n.to.node].inputPins[n.to.pin]}else if(t in this.linksByFrom)for(var o=k(t),a=o.nodeId,s=o.pin,u=this.linksByFrom[t],c=function(n){var r=u[n];r.from.node===a&&r.from.pin===s&&(delete e.nodes[r.to.node].inputPins[r.to.pin],delete e.linksByTo[I(r.to)],e.linksByFrom[t]=u.filter((function(t,e){return e!==n})))},l=0;l<u.length;++l)c(l);return!1},e.setupNodes=function(t){this.nodes=t,this.bakeConnections(t)},e.bakeConnections=function(t){var e=this;return this.linksByTo={},this.linksByFrom={},!!t&&(Object.keys(t).forEach((function(n){var r=t[n];r.inputPins&&Object.keys(r.inputPins).forEach((function(t){var i=E(n,t),o=r.inputPins[t],a=e.buildNewConnection(o,n,t);e.linksByTo[i]=a,e.linksByFrom[o]?e.linksByFrom[o].push(a):e.linksByFrom[o]=[a]}))})),!0)},e.findOutputConnectedNodes=function(t){var e=this,n=new Set,r=this.registry.getNodeTypeInfo(t.type).OutputFormat;return r&&Object.keys(r).forEach((function(r){var i=e.linksByFrom[E(t.id,r)];i&&i.forEach((function(t){n.add(t.to.node)}))})),n},e.issueEvent=function(t){var e=this.handlers[t.type];e&&e.forEach((function(e){e(t)}))},e.buildNewConnection=function(t,e,n){var r=k(t);return{from:{node:r.nodeId,pin:r.pin,pinId:t},to:{node:e,pin:n,pinId:E(e,n)}}},e.createsCycle=function(t,e){var n=new Set,r=[],i=k(t).nodeId;n.add(i);var o=k(e).nodeId;r.push(o);do{var a=r.pop();if(n.has(a))return!0;n.add(a);var s=this.findOutputConnectedNodes(this.nodes[a]);r.push.apply(r,Array.from(s))}while(r.length>0);return!1},t}();function B(t){var e=t.startPoint,n=t.endPoint,r="\n        M "+e+"\n        C "+[e[0]+90,e[1]]+"\n        "+[n[0]-90,n[1]]+"\n        "+n+"\n    ";return o.a.createElement("path",{d:r,className:"node-link"})}var F={value:function(){}};function M(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new H(r)}function H(t){this._=t}function q(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function U(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function V(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=F,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}H.prototype=M.prototype={constructor:H,on:function(t,e){var n,r=this._,i=q(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=V(r[n],t.name,e);else if(null==e)for(n in r)r[n]=V(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=U(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new H(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var G="http://www.w3.org/1999/xhtml",L={svg:"http://www.w3.org/2000/svg",xhtml:G,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function z(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),L.hasOwnProperty(e)?{space:L[e],local:t}:t}function W(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===G&&e.documentElement.namespaceURI===G?e.createElement(t):e.createElementNS(n,t)}}function X(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Y(t){var e=z(t);return(e.local?X:W)(e)}function J(){}function K(t){return null==t?J:function(){return this.querySelector(t)}}function Q(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function Z(){return[]}function $(t){return function(e){return e.matches(t)}}var tt=Array.prototype.find;function et(){return this.firstElementChild}var nt=Array.prototype.filter;function rt(){return this.children}function it(t){return new Array(t.length)}function ot(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function at(t){return function(){return t}}function st(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new ot(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function ut(t,e,n,r,i,o,a){var s,u,c,l=new Map,h=e.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(p[s]=c=a.call(u,u.__data__,s,e)+"",l.has(c)?i[s]=u:l.set(c,u));for(s=0;s<d;++s)c=a.call(t,o[s],s,o)+"",(u=l.get(c))?(r[s]=u,u.__data__=o[s],l.delete(c)):n[s]=new ot(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l.get(p[s])===u&&(i[s]=u)}function ct(t){return t.__data__}function lt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ht(t){return function(){this.removeAttribute(t)}}function dt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pt(t,e){return function(){this.setAttribute(t,e)}}function ft(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function vt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function mt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function yt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gt(t){return function(){this.style.removeProperty(t)}}function bt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function wt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xt(t,e){return t.style.getPropertyValue(e)||yt(t).getComputedStyle(t,null).getPropertyValue(e)}function Ot(t){return function(){delete this[t]}}function _t(t,e){return function(){this[t]=e}}function Nt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Et(t){return t.trim().split(/^|\s+/)}function kt(t){return t.classList||new jt(t)}function jt(t){this._node=t,this._names=Et(t.getAttribute("class")||"")}function Ct(t,e){for(var n=kt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function It(t,e){for(var n=kt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Tt(t){return function(){Ct(this,t)}}function Pt(t){return function(){It(this,t)}}function Dt(t,e){return function(){(e.apply(this,arguments)?Ct:It)(this,t)}}function At(){this.textContent=""}function St(t){return function(){this.textContent=t}}function Rt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Bt(){this.innerHTML=""}function Ft(t){return function(){this.innerHTML=t}}function Mt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ht(){this.nextSibling&&this.parentNode.appendChild(this)}function qt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ut(){return null}function Vt(){var t=this.parentNode;t&&t.removeChild(this)}function Gt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Lt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Wt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Xt(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Yt(t,e,n){var r=yt(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Jt(t,e){return function(){return Yt(this,t,e)}}function Kt(t,e){return function(){return Yt(this,t,e.apply(this,arguments))}}function Qt(){var t,e,n,r,i,o,a;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=this._groups,e=0,n=t.length;case 1:if(!(e<n)){s.next=13;break}r=t[e],i=0,o=r.length;case 3:if(!(i<o)){s.next=10;break}if(!(a=r[i])){s.next=7;break}return s.next=7,a;case 7:++i,s.next=3;break;case 10:++e,s.next=1;break;case 13:case"end":return s.stop()}}),N,this)}ot.prototype={constructor:ot,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},jt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Zt=[null];function $t(t,e){this._groups=t,this._parents=e}function te(t){return"string"===typeof t?new $t([[document.querySelector(t)]],[document.documentElement]):new $t([[t]],Zt)}function ee(t,e){if(t=function(t){for(var e;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function ne(t){t.stopImmediatePropagation()}function re(t){t.preventDefault(),t.stopImmediatePropagation()}$t.prototype=function(){return new $t([[document.documentElement]],Zt)}.prototype={constructor:$t,select:function(t){"function"!==typeof t&&(t=K(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new $t(r,this._parents)},selectAll:function(t){t="function"===typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:Q(e)}}(t):function(t){return null==t?Z:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new $t(r,i)},selectChild:function(t){return this.select(null==t?et:function(t){return function(){return tt.call(this.children,t)}}("function"===typeof t?t:$(t)))},selectChildren:function(t){return this.selectAll(null==t?rt:function(t){return function(){return nt.call(this.children,t)}}("function"===typeof t?t:$(t)))},filter:function(t){"function"!==typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new $t(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ct);var n=e?ut:st,r=this._parents,i=this._groups;"function"!==typeof t&&(t=at(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],d=h.length,p=Q(t.call(l,l&&l.__data__,c,r)),f=p.length,v=s[c]=new Array(f),m=a[c]=new Array(f),y=u[c]=new Array(d);n(l,h,v,m,y,p,e);for(var g,b,w=0,x=0;w<f;++w)if(g=v[w]){for(w>=x&&(x=w+1);!(b=m[x])&&++x<f;);g._next=b||null}}return(a=new $t(a,r))._enter=s,a._exit=u,a},enter:function(){return new $t(this._enter||this._groups.map(it),this._parents)},exit:function(){return new $t(this._exit||this._groups.map(it),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof $t))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,d=a[s]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(d[p]=u);for(;s<r;++s)a[s]=e[s];return new $t(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=lt);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new $t(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t,e=0,n=Object(w.a)(this);try{for(n.s();!(t=n.n()).done;){t.value;++e}}catch(r){n.e(r)}finally{n.f()}return e},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=z(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?dt:ht:"function"===typeof e?n.local?mt:vt:n.local?ft:pt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?gt:"function"===typeof e?wt:bt)(t,e,null==n?"":n)):xt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ot:"function"===typeof e?Nt:_t)(t,e)):this.node()[t]},classed:function(t,e){var n=Et(t+"");if(arguments.length<2){for(var r=kt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?Dt:e?Tt:Pt)(n,e))},text:function(t){return arguments.length?this.each(null==t?At:("function"===typeof t?Rt:St)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Bt:("function"===typeof t?Mt:Ft)(t)):this.node().innerHTML},raise:function(){return this.each(Ht)},lower:function(){return this.each(qt)},append:function(t){var e="function"===typeof t?t:Y(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:Y(t),r=null==e?Ut:"function"===typeof e?e:K(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Vt)},clone:function(t){return this.select(t?Lt:Gt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=zt(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Xt:Wt,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"===typeof e?Kt:Jt)(t,e))},[Symbol.iterator]:Qt};var ie,oe=function(t){return function(){return t}};function ae(t,e){var n=e.sourceEvent,r=e.subject,i=e.target,o=e.identifier,a=e.active,s=e.x,u=e.y,c=e.dx,l=e.dy,h=e.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:h}})}function se(t){return!t.ctrlKey&&!t.button}function ue(){return this.parentNode}function ce(t,e){return null==e?{x:t.x,y:t.y}:e}function le(){return navigator.maxTouchPoints||"ontouchstart"in this}function he(){var t,e,n,r,i=se,o=ue,a=ce,s=le,u={},c=M("start","drag","end"),l=0,h=0;function d(t){t.on("mousedown.drag",p).filter(s).on("touchstart.drag",m).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!r&&i.call(this,a,s)){var u=b(this,o.call(this,a,s),a,s,"mouse");u&&(te(a.view).on("mousemove.drag",f,!0).on("mouseup.drag",v,!0),function(t){var e=t.document.documentElement,n=te(t).on("dragstart.drag",re,!0);"onselectstart"in e?n.on("selectstart.drag",re,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(a.view),ne(a),n=!1,t=a.clientX,e=a.clientY,u("start",a))}}function f(r){if(re(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>h}u.mouse("drag",r)}function v(t){te(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,r=te(t).on("dragstart.drag",null);e&&(r.on("click.drag",re,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),re(t),u.mouse("end",t)}function m(t,e){if(i.call(this,t,e)){var n,r,a=t.changedTouches,s=o.call(this,t,e),u=a.length;for(n=0;n<u;++n)(r=b(this,s,t,e,a[n].identifier,a[n]))&&(ne(t),r("start",t,a[n]))}}function y(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(re(t),n("drag",t,r[e]))}function g(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=u[i[e].identifier])&&(ne(t),n("end",t,i[e]))}function b(t,e,n,r,i,o){var s,h,p,f=c.copy(),v=ee(o||n,e);if(null!=(p=a.call(t,new ae("beforestart",{sourceEvent:n,target:d,identifier:i,active:l,x:v[0],y:v[1],dx:0,dy:0,dispatch:f}),r)))return s=p.x-v[0]||0,h=p.y-v[1]||0,function n(o,a,c){var m,y=v;switch(o){case"start":u[i]=n,m=l++;break;case"end":delete u[i],--l;case"drag":v=ee(c||a,e),m=l}f.call(o,t,new ae(o,{sourceEvent:a,subject:p,target:d,identifier:i,active:m,x:v[0]+s,y:v[1]+h,dx:v[0]-y[0],dy:v[1]-y[1],dispatch:f}),r)}}return d.filter=function(t){return arguments.length?(i="function"===typeof t?t:oe(!!t),d):i},d.container=function(t){return arguments.length?(o="function"===typeof t?t:oe(t),d):o},d.subject=function(t){return arguments.length?(a="function"===typeof t?t:oe(t),d):a},d.touchable=function(t){return arguments.length?(s="function"===typeof t?t:oe(!!t),d):s},d.on=function(){var t=c.on.apply(c,arguments);return t===c?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d}function de(t,e,n,r,i){if(r===i)return!1;if(n.createsCycle(r,i))return!1;if("any"===e)return!0;if(Array.isArray(e)){if(Array.isArray(t)){for(var o=0;o<e.length;++o)if(t.indexOf(e[o])>=0)return!0;return!1}return e.includes(t)}return Array.isArray(t)?t.includes(e):e===t}function pe(t){var e=t.nodeId,n=t.name,r=t.visualName,i=t.dataType,a=t.resolver,s=E(e,n),u=Object(x.a)({item:{type:ie.FROM_OUTPUT,dataType:i,pinId:s},collect:function(t){return{dragging:t.isDragging()}}}),c=u[0].dragging?"pin dragging node-noglobals":"pin node-noglobals",l=!r||""===r,h=(0,u[1])((0,Object(O.a)({accept:ie.FROM_INPUT,canDrop:function(t,e){return de(i,t.dataType,a,s,t.pinId)},drop:function(t){return{connection:a.createPinConnection(s,t.pinId)}},collect:function(t){return{isOver:!!t.isOver(),canDrop:!!t.canDrop(),clientOffset:t.getClientOffset()}}})[1])(o.a.createElement("div",{id:s,className:c})));return o.a.createElement("div",{className:"output-pin"},l?null:o.a.createElement("span",null,n),h)}function fe(t){var e=t.nodeId,n=t.name,r=t.visualName,i=t.dataType,a=t.error,s=t.resolver,u=E(e,n),c=Object(O.a)({accept:ie.FROM_OUTPUT,canDrop:function(t,e){return de(t.dataType,i,s,t.pinId,u)},drop:function(t){return{connection:s.createPinConnection(t.pinId,u)}},collect:function(t){return{isOver:!!t.isOver(),canDrop:!!t.canDrop(),clientOffset:t.getClientOffset()}}})[1],l=Object(x.a)({item:{type:ie.FROM_INPUT,dataType:i,pinId:u},collect:function(t){return{dragging:t.isDragging()}}});!function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(l[0]);var h="pin node-noglobals "+(a?"error":""),d=void 0===r?n:r,p=(0,l[1])(c(o.a.createElement("div",{id:u,className:h})));return o.a.createElement("div",{className:"input-pin"},p,o.a.createElement("span",null,d))}ae.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},function(t){t.FROM_OUTPUT="CN_FROM_OUTPUT",t.FROM_INPUT="CN_FROM_INPUT"}(ie||(ie={}));var ve=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={},n.dragArea=o.a.createRef(),n.resize=o.a.createRef(),n.inputPinChangeHandler={},n.destroyNode=n.destroyNode.bind(A(n)),n}D(e,t);var n=e.prototype;return n.destroyNode=function(){var t;null===(t=this.props.resolver)||void 0===t||t.destroyNode(this.props.id)},n.pinChangedAndIsValid=function(t,e,n){var r=n.inputPins[t];return e.inputPins[t]!==r&&r},n.componentDidUpdate=function(){var t=this.props,n=t.x,r=t.y,i=t.width,o=t.height;te(this.dragArea.current).data([{x:n,y:r}]),te(this.resize.current).data([{x:n,y:r,width:i,height:o,minW:this.props.minWidth||e.MIN_WIDTH,minH:this.props.minHeight||e.MIN_HEIGHT}])},n.registerForDragging=function(t){var e=this;var n=he().filter((function(t){return C(t.target)})).on("start",(function(t,e){e.x=t.x,e.y=t.y})).on("drag",(function(t,n){n.x=t.x,n.y=t.y,te(e.dragArea.current.parentNode).attr("x",j(n.x)).attr("y",j(n.y)),e.props.resolver.updateNode(e.props.id,{x:j(n.x),y:j(n.y)},{nohistory:!0,moveTop:!0})})).on("end",(function(t,n){n.x=t.x,n.y=t.y,te(e.dragArea.current.parentNode).attr("x",j(n.x)).attr("y",j(n.y)),e.props.x===n.x&&e.props.y===n.y||e.props.resolver.updateNode(e.props.id,{x:j(n.x),y:j(n.y)})})),r=this.props,i=r.x,o=r.y;te(t).data([{x:i,y:o}]).call(n)},n.registerForResize=function(t){var n=this;var r=he().filter((function(t){return C(t.target)})).on("start",(function(t,e){e.rx=t.x,e.ry=t.y,e.startW=e.width,e.startH=e.height})).on("drag",(function(t,e){e.width=j(Math.max(e.startW+t.x-e.rx,e.minW)),e.height=j(Math.max(e.startH+t.y-e.ry,e.minH)),te(n.dragArea.current.parentNode).attr("width",e.width).attr("height",e.height),n.props.resolver.updateNode(n.props.id,{width:e.width,height:e.height},{nohistory:!0})})).on("end",(function(t,e){e.width=j(Math.max(e.startW+t.x-e.rx,e.minW)),e.height=j(Math.max(e.startH+t.y-e.ry,e.minH)),te(n.dragArea.current.parentNode).attr("width",e.width).attr("height",e.height),n.props.width===e.width&&n.props.height===e.height||n.props.resolver.updateNode(n.props.id,{width:e.width,height:e.height})})),i=this.props,o=i.x,a=i.y,s=i.width,u=i.height;te(t).data([{x:o,y:a,width:s,height:u,minW:this.props.minWidth||e.MIN_WIDTH,minH:this.props.minHeight||e.MIN_HEIGHT}]).call(r)},n.componentDidMount=function(){this.registerForDragging(this.dragArea.current),this.registerForResize(this.resize.current)},n.render=function(){var t=this,n=this.props,r=n.x,i=n.y,a=this.props.error,s=this.props.input?Object.entries(this.props.input).map((function(e){var n=e[0],r=e[1];return o.a.createElement(fe,{error:!1,dataType:r.type,resolver:t.props.resolver,key:n,nodeId:t.props.id,name:n,visualName:r.visualName})})):null,u=this.props.output?Object.entries(this.props.output).map((function(e){var n=e[0],r=e[1];return o.a.createElement(pe,{dataType:r.type,key:n,nodeId:t.props.id,name:n,visualName:r.visualName,resolver:t.props.resolver})})):null,c=Math.max(this.props.minWidth||e.MIN_WIDTH,this.props.width),l=Math.max(this.props.minHeight||e.MIN_HEIGHT,this.props.height);return o.a.createElement("foreignObject",{x:r,y:i,width:c,height:l,className:"embedded-node"},o.a.createElement("div",{ref:this.dragArea,title:this.props.title,className:"node "+(a?"error":"")},o.a.createElement("div",{className:"main-node node-drag"},o.a.createElement("div",{className:"node-remove"},o.a.createElement("span",{role:"img","aria-label":"delete",onClick:this.destroyNode},"\ud83d\uddd1\ufe0f")),o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"node-drag"},o.a.createElement("span",null,this.props.title),o.a.createElement("hr",null))),o.a.createElement("div",{className:"node-body"},this.props.input?o.a.createElement("div",{className:"ignore-mouse inputs"},s):null,o.a.createElement("div",{className:"contents node-noglobals",style:{maxHeight:this.props.height-20-45}},this.props.children),this.props.output?o.a.createElement("div",{className:"outputs"},u):null)),o.a.createElement("div",{className:"resize",ref:this.resize},"\u14a7")))},e}(o.a.Component);function me(t){var e=t.canvas,n=t.children,i=Object(O.a)({accept:[r.VISUAL_NODE],drop:function(t,n){e.variableDropped(t,n.getClientOffset())},collect:function(t){return{isOver:!!t.isOver(),clientOffset:t.getClientOffset()}}}),a=i[0].isOver,s=i[1];return o.a.createElement("svg",{ref:s,id:"canvas",width:"100%",height:"100vh"},a?o.a.createElement("text",{x:20,y:20},"Drop to create node!"):null,n)}ve.MIN_WIDTH=160,ve.MIN_HEIGHT=96;var ye=function(t){function e(e){var n;return(n=t.call(this,e)||this).shouldRenderConnections=!1,n.state={nodes:e.resolver.getNodes(),connections:e.resolver.getConnections()},n.undo=[{data:n.state.nodes,description:"Start"}],n.undoIndex=0,n.variableDropped=n.variableDropped.bind(A(n)),n.mainGroup=o.a.createRef(),n.dragG=o.a.createRef(),n.transform={x:0,y:0,zoom:1},n.resolverStateChanged=n.resolverStateChanged.bind(A(n)),n}D(e,t);var n=e.prototype;return n.variableDropped=function(t,e){var n=this.svgPoint(e.x,e.y);this.props.resolver.createNode(t.nodeType,P({x:j(n[0]),y:j(n[1])},t))},n.svgPoint=function(t,e){if(null!==this.mainGroup.current)return function(t,e,n,r){var i=t.createSVGPoint();i.x=n,i.y=r;var o=i.matrixTransform(e.getScreenCTM().inverse());return[o.x,o.y]}(this.mainGroup.current.closest("svg"),this.mainGroup.current,t,e);throw new Error("Invalid G group")},n.renderConnections=function(){var t=this,e=10*this.transform.zoom,n=Object.entries(this.state.connections),r=[];return n.forEach((function(n){var i,a,s=n[0],u=n[1],c=null===(i=document.getElementById(I(u.from)))||void 0===i?void 0:i.getBoundingClientRect(),l=null===(a=document.getElementById(I(u.to)))||void 0===a?void 0:a.getBoundingClientRect();if(c)if(l){var h=t.svgPoint(c.x+e,c.y+e),d=t.svgPoint(l.x+e,l.y+e);r.push(o.a.createElement(B,{key:s,startPoint:h,endPoint:d}))}else console.warn("Bad pin connection: To: "+I(u.to)+" missing");else console.warn("Bad pin connection: From: "+I(u.from)+" missing")})),r},n.renderNodes=function(){var t=this,e=Object.entries(this.state.nodes);return Array.from(e,(function(e){var n=e[0],r=e[1];return o.a.createElement(o.a.Fragment,{key:n},t.props.resolver.render(r))}))},n.resolverStateChanged=function(t){t.nodes&&!t.nohistory&&this.saveNodeHistory(t.nodes),this.setState({nodes:t.nodes?t.nodes:this.state.nodes,connections:t.connections?t.connections:this.state.connections})},n.saveNodeHistory=function(t){this.undo=this.undo.slice(0,this.undoIndex+1);var e={data:t,description:"state?"};this.undo.push(e),this.undoIndex++},n.redoOnce=function(){this.undoIndex+1<this.undo.length&&(this.undoIndex++,this.useFromHistory())},n.useFromHistory=function(){var t=this.undo[this.undoIndex];this.props.resolver.restoreNodes(t.data),this.setState({nodes:this.props.resolver.getNodes(),connections:this.props.resolver.getConnections()})},n.undoOnce=function(){0!==this.undoIndex&&(this.undoIndex--,this.useFromHistory())},n.componentWillUnmount=function(){this.props.resolver.unbind("node-new",this.resolverStateChanged),this.props.resolver.unbind("node-update",this.resolverStateChanged),this.props.resolver.unbind("node-delete",this.resolverStateChanged),this.props.resolver.unbind("connection-new",this.resolverStateChanged)},n.componentDidMount=function(){var t=this;if(this.props.resolver.on("node-new",this.resolverStateChanged),this.props.resolver.on("node-update",this.resolverStateChanged),this.props.resolver.on("node-delete",this.resolverStateChanged),this.props.resolver.on("connection-new",this.resolverStateChanged),this.mainGroup.current&&this.dragG.current){var e=this,n=Object(_.c)(this.mainGroup.current);Object(_.c)(this.dragG.current).call(Object(_.d)().filter((function(t){return C(t.target)})).on("zoom",(function(t){e.transform={x:t.transform.x,y:t.transform.y,zoom:t.transform.k},n.attr("transform",t.transform)}))),setTimeout((function(){t.shouldRenderConnections=!0,t.forceUpdate()}),50)}},n.componentDidUpdate=function(t,e){var n=this;this.state.connections!==e.connections&&(this.shouldRenderConnections=!1,setTimeout((function(){n.shouldRenderConnections=!0,n.forceUpdate()}),10))},n.render=function(){return o.a.createElement(me,{canvas:this},o.a.createElement("g",{ref:this.dragG},o.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white",style:{visibility:"hidden",pointerEvents:"all"}}),o.a.createElement("g",{ref:this.mainGroup,transform:"translate(0,0) scale(1)"},this.shouldRenderConnections?this.renderConnections():null,o.a.createElement("g",null,this.renderNodes()))))},e}(o.a.Component),ge=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).data=void 0,r.data={value:0,name:""},r}return n}(T);ge.Type="InputVariable",ge.Name="Input Variable",ge.MinDimensions={height:112},ge.outValue="value",ge.InputFormat=void 0,ge.OutputFormat={[ge.outValue]:{type:"number",visualName:""}},ge.Construct=function(t){return new ge(t)},ge.LocalResolve=function(t,e){return{[ge.outValue]:t.data.value}};var be=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).data={op:"+"},t}return n}(T);function we(t,e){return t+e}function xe(t,e){return t-e}function Oe(t,e){return t*e}function _e(t,e){return t/e}function Ne(t,e){return Math.pow(t,e)}function Ee(t,e,n){var r=[];return t.forEach((function(t,i){return r.push(n(+t,+e))})),{[be.outSum]:r}}be.Type="SumNumbers",be.Name="Sum",be.MinDimensions={height:136,width:280},be.inA="a",be.inB="b",be.InputFormat={[be.inA]:{type:["number","number[]"],visualName:"A"},[be.inB]:{type:["number","number[]"],visualName:"B"}},be.outSum="sum",be.OutputFormat={[be.outSum]:{type:["number","number[]"]}},be.Construct=function(t){return new be(t)},be.LocalResolve=function(t,e){var n,r=e.a,i=e.b,o=function(t){switch(t){case"+":return we;case"-":return xe;case"*":return Oe;case"/":return _e;case"pow":return Ne}}((null===(n=t.data)||void 0===n?void 0:n.op)||"+");return Array.isArray(r)?Array.isArray(i)?r.length!==i.length?{error:"Input size do not match!"}:function(t,e,n){var r=[];return t.forEach((function(t,i){return r.push(n(+t,+e[i]))})),{[be.outSum]:r}}(r,i,o):Ee(r,i,o):Array.isArray(i)?Ee(i,r,o):{[be.outSum]:o(+r,+i)}};var ke=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return n}(T);ke.Type="ScatterPlotGraph",ke.Name="Scatter Plot",ke.InputFormat={x:{type:"number[]"},y:{type:"number[]"}},ke.MinDimensions={height:120},ke.OutputFormat=void 0,ke.Construct=function(t){return new ke(t)},ke.LocalResolve=function(t,e){return e};var je=n(162),Ce=n(76),Ie=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t,e=this;return o.a.createElement(ve,Object.assign({title:"Sum Values"},this.props,{input:be.InputFormat,output:be.OutputFormat}),o.a.createElement("div",null,o.a.createElement(je.a,{id:"dropdown-basic-button",title:"Operation: "+(null===(t=this.props.data)||void 0===t?void 0:t.op),className:"gn-node-dropdown"},o.a.createElement(Ce.a.Item,{as:"button",onClick:function(){return e.props.resolver.updateNode(e.props.id,{data:{op:"+"}},{invalidateOutput:!0})}},"Sum"),o.a.createElement(Ce.a.Item,{as:"button",onClick:function(){return e.props.resolver.updateNode(e.props.id,{data:{op:"-"}},{invalidateOutput:!0})}},"Subtract"),o.a.createElement(Ce.a.Item,{as:"button",onClick:function(){return e.props.resolver.updateNode(e.props.id,{data:{op:"*"}},{invalidateOutput:!0})}},"Multiply"),o.a.createElement(Ce.a.Item,{as:"button",onClick:function(){return e.props.resolver.updateNode(e.props.id,{data:{op:"/"}},{invalidateOutput:!0})}},"Divide"),o.a.createElement(Ce.a.Item,{as:"button",onClick:function(){return e.props.resolver.updateNode(e.props.id,{data:{op:"pow"}},{invalidateOutput:!0})}},"Power"))),o.a.createElement("div",{style:{overflow:"auto"}},o.a.createElement("span",{className:"node-noglobals"},Array.isArray(this.props.resolvedData.sum)?"Computed over "+this.props.resolvedData.sum.length+" elements":""+this.props.resolvedData.sum)))}}]),n}(i.Component),Te=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"localResolve",value:function(t,e){return this.getNodeTypeInfo(t.type).LocalResolve(t,e)}}]),n}(S),Pe=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t,r){var i;return Object(u.a)(this,n),(i=e.call(this,t,r)).pinData=void 0,i.resolvedNodes=void 0,i.pinData={},i.resolvedNodes={},i}return Object(c.a)(n,[{key:"resolveNode",value:function(t){if(t.id in this.resolvedNodes)return this.resolvedNodes[t.id];var e=this.registry.getNodeTypeInfo(t.type),n=this.resolveNodeInputs(t,e.InputFormat),r=this.resolveNodeOutputs(t,n);return this.resolvedNodes[t.id]=r,r}},{key:"invalidateNodeOutput",value:function(t){var e=this;t in this.resolvedNodes&&(delete this.resolvedNodes[t],this.forNodeOutputConnections(t,(function(n,r,i){e.invalidateNodeOutput(n),delete e.pinData[E(t,i)]})))}},{key:"resolvePinData",value:function(t){if(t in this.pinData)return this.pinData[t];var e=k(t),n=e.nodeId,r=e.pin;return n in this.nodes?this.resolveNode(this.nodes[n])[r]:void 0}},{key:"setPinData",value:function(t,e){this.pinData[t]=e}},{key:"resolveNodeInputs",value:function(t,e){var n=this;if(e){var r={};return Object.keys(e).forEach((function(e){var i=t.inputPins[e];i&&(r[e]=n.resolvePinData(i))})),r}}},{key:"resolveNodeOutputs",value:function(t,e){return this.registry.localResolve(t,e)}}]),n}(R),De=function t(){Object(u.a)(this,t)};De.Type="DataPreview",De.Name="Data Preview",De.InputFormat={a:{type:"any",visualName:""}},De.OutputFormat=void 0,De.Construct=function(t){return new T(t)},De.LocalResolve=function(t,e){return e};var Ae=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).graph=void 0,r.state={},r}return Object(c.a)(n,[{key:"buildgraph",value:function(t,e){if(!t||!e)return null;console.assert(t.length===e.length);var n=t.map((function(t,n){return{x:t,y:e[n]}})),r=100,i=100,a=_.b().range([5,r-5]).domain(_.a(n,(function(t){return t.x}))),s=_.b().range([i-5,5]).domain(_.a(n,(function(t){return t.y})));return n.map((function(t,e){return o.a.createElement("circle",{key:e,cx:a(t.x),cy:s(t.y),r:2,fill:"red"})}))}},{key:"render",value:function(){return o.a.createElement(ve,Object.assign({title:"Scatter Plot"},this.props,{input:ke.InputFormat,output:ke.OutputFormat}),o.a.createElement("div",null,o.a.createElement("svg",{width:this.props.width-65,height:this.props.height-70,viewBox:"0,0, 100,100",className:"node-noglobals"},this.buildgraph(this.props.resolvedData.x,this.props.resolvedData.y))))}}]),n}(i.Component),Se=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"mapArray",value:function(t){var e=this,n=null;t.length>30&&(n=o.a.createElement(v.a,null,o.a.createElement(m.a,null,t.length-30," more rows...")),t=t.slice(0,30));var r=t.map((function(t,n){return o.a.createElement(v.a,{key:n},e.getView(t))}));return o.a.createElement(o.a.Fragment,null,r,n)}},{key:"getView",value:function(t){var e=typeof t;switch(e){case"object":if(Array.isArray(t))return this.mapArray(t);Object.keys(t).map((function(e){return o.a.createElement(m.a,null,t[e])}));break;case"string":case"number":return o.a.createElement(m.a,null,t);case"undefined":return"No data";default:return console.warn("unhandled type: "+e),o.a.createElement("span",null,""+t)}}},{key:"render",value:function(){return o.a.createElement(ve,Object.assign({},this.props,{title:"Data Preview",input:De.InputFormat}),o.a.createElement("div",{className:"gn-data-preview container node-noglobals",style:{maxHeight:this.props.height-60+"px"}},this.getView(this.props.resolvedData.a)))}}]),n}(i.Component),Re=n(18),Be=n(166),Fe=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).inputRef=void 0,r.inputRef=o.a.createRef(),r.onBlur=r.onBlur.bind(Object(Re.a)(r)),r.onChange=r.onChange.bind(Object(Re.a)(r)),r}return Object(c.a)(n,[{key:"onBlur",value:function(t){this.props.resolver.updateNode(this.props.id,{data:Object(d.a)(Object(d.a)({},this.props.data),{},{value:this.props.data.value})},{invalidateOutput:!0})}},{key:"onChange",value:function(t){this.props.resolver.updateNode(this.props.id,{data:Object(d.a)(Object(d.a)({},this.props.data),{},{value:t.target.value})},{invalidateOutput:!0})}},{key:"render",value:function(){var t=this;return o.a.createElement(ve,Object.assign({title:"Number Input"},this.props,{output:ge.OutputFormat}),o.a.createElement(Be.a.Control,{size:"lg",type:"text",onBlur:this.onBlur,style:{padding:"5px",height:"2em"},placeholder:""+this.props.data.value,ref:this.inputRef,value:this.props.data.value,onChange:this.onChange,onKeyPress:function(e){"Enter"===e.key&&t.onBlur({})}}))}}]),n}(i.Component),Me=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).onChange=r.onChange.bind(Object(Re.a)(r)),r}return Object(c.a)(n,[{key:"onChange",value:function(t){var e=this.generateRandomData();this.props.resolver.updateNode(this.props.id,{data:e},{invalidateOutput:!0})}},{key:"generateRandomData",value:function(){for(var t=[],e=0;e<100;++e)t.push(Math.floor(100*Math.random()));return t}},{key:"render",value:function(){return o.a.createElement(ve,Object.assign({title:"Random Data"},this.props,{output:n.OutputFormat}),o.a.createElement(y.a,{onClick:this.onChange},"Generate"))}}]),n}(i.Component);function He(t){var e=t.name,n=t.details,i=Object(x.a)({item:Object(d.a)(Object(d.a)({},n),{},{type:r.VISUAL_NODE}),collect:function(t){return{}}}),a=Object(p.a)(i,2)[1];return o.a.createElement("div",{className:"sidebar-node",ref:a},e)}Me.Type="RandomDataGraphNode",Me.Name="Random Data",Me.InputFormat=void 0,Me.MinDimensions={height:112},Me.OutputFormat={data:{type:"number[]"}},Me.Construct=function(t){return new T(t)},Me.LocalResolve=function(t,e){return{data:t.data}},Me.Render=function(t){return o.a.createElement(Me,t)};var qe=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).nodeRegistry=void 0,r.resolver=void 0,r.canvas=void 0,r.state={filter:""},r.canvas=o.a.createRef(),r.nodeRegistry=new Te,r.nodeRegistry.registerType(Object(d.a)(Object(d.a)({},be),{},{Render:function(t){return o.a.createElement(Ie,t)}})),r.nodeRegistry.registerType(Object(d.a)(Object(d.a)({},ge),{},{Render:function(t){return o.a.createElement(Fe,t)}})),r.nodeRegistry.registerType(Object(d.a)(Object(d.a)({},De),{},{Render:function(t){return o.a.createElement(Se,t)}})),r.nodeRegistry.registerType(Object(d.a)(Object(d.a)({},ke),{},{Render:function(t){return o.a.createElement(Ae,t)}})),r.nodeRegistry.registerType(Object(d.a)({},Me)),r.resolver=new Pe(r.nodeRegistry),r.resolver.restoreNodes({wauhumvtystyqxiueahna1age:{id:"wauhumvtystyqxiueahna1age",type:"SumNumbers",x:288,y:112,width:288,height:144,inputPins:{a:"djnqvixdjmbsngbieahna1ecl-value",b:"djnqvixdjmbsngbieahna1ecl-value"},data:{op:"+"}},djnqvixdjmbsngbieahna1ecl:{id:"djnqvixdjmbsngbieahna1ecl",type:"InputVariable",x:0,y:256,width:160,height:112,inputPins:{},data:{value:"10",name:""}},idgbhdxfmjishsdleahna2cad:{id:"idgbhdxfmjishsdleahna2cad",type:"RandomDataGraphNode",x:144,y:752,width:160,height:112,inputPins:{},data:[12,89,82,7,13,14,6,9,58,3,30,73,44,26,94,78,39,32,97,94,47,57,50,95,88,94,94,80,33,0,59,7,91,96,89,26,68,5,16,51,46,2,86,81,89,91,20,73,57,73,37,80,9,28,79,72,49,54,0,39,27,17,17,68,51,0,2,42,57,1,63,91,84,94,62,88,72,44,1,71,50,3,13,0,58,11,22,69,92,12,48,28,68,62,64,38,86,96,21,88]},oeyyyrfcurccpwpheahna2gbm:{id:"oeyyyrfcurccpwpheahna2gbm",type:"ScatterPlotGraph",x:1136,y:464,width:384,height:368,inputPins:{x:"cqdeflgstsexdqkveanak7404-sum",y:"yhofknaevtcoxethean9ji9de-sum"}},vmakunxfoiksawoweahna31ll:{id:"vmakunxfoiksawoweahna31ll",type:"DataPreview",x:432,y:832,width:192,height:240,inputPins:{a:"idgbhdxfmjishsdleahna2cad-data"}},fhdcppzpelrkxocgeahna3n05:{id:"fhdcppzpelrkxocgeahna3n05",type:"SumNumbers",x:688,y:96,width:288,height:144,inputPins:{a:"wauhumvtystyqxiueahna1age-sum",b:"wauhumvtystyqxiueahna1age-sum"},data:{op:"*"}},yhofknaevtcoxethean9ji9de:{id:"yhofknaevtcoxethean9ji9de",type:"SumNumbers",x:416,y:576,width:256,height:224,inputPins:{a:"djnqvixdjmbsngbieahna1ecl-value",b:"idgbhdxfmjishsdleahna2cad-data"},data:{op:"-"}},uguqlbyzpaiifdhrean9jmhem:{id:"uguqlbyzpaiifdhrean9jmhem",type:"RandomDataGraphNode",x:528,y:288,width:160,height:112,inputPins:{},data:[44,7,27,52,9,55,5,73,26,40,50,87,63,22,61,85,62,56,34,42,56,45,5,4,30,41,54,26,20,11,0,70,3,99,84,19,61,56,19,80,45,37,20,68,62,17,0,10,18,20,75,84,56,64,28,55,72,62,65,52,16,91,96,68,34,33,0,42,69,97,78,87,2,13,27,75,67,41,55,80,82,5,59,24,2,65,80,40,72,12,77,70,82,98,53,16,12,32,89,43]},yqqexvbvxkggbsxceanak6lg5:{id:"yqqexvbvxkggbsxceanak6lg5",type:"InputVariable",x:528,y:416,width:160,height:112,inputPins:{},data:{value:"4",name:""}},cqdeflgstsexdqkveanak7404:{id:"cqdeflgstsexdqkveanak7404",type:"SumNumbers",x:784,y:288,width:288,height:144,inputPins:{b:"yqqexvbvxkggbsxceanak6lg5-value",a:"uguqlbyzpaiifdhrean9jmhem-data"},data:{op:"pow"}},oqfmoleswjxeiamxeanaklk9b:{id:"oqfmoleswjxeiamxeanaklk9b",type:"DataPreview",x:1168,y:208,width:208,height:160,inputPins:{a:"cqdeflgstsexdqkveanak7404-sum"}}}),r}return Object(c.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement(f.a,{fluid:!0},o.a.createElement(v.a,null,o.a.createElement(m.a,{md:1.5,style:{paddingTop:"10px",paddingLeft:"15px"}},o.a.createElement(v.a,null,o.a.createElement(y.a,{style:{margin:"2px"},onClick:function(e){return navigator.clipboard.writeText(JSON.stringify(t.resolver.getNodes()))}},"Save"),o.a.createElement(y.a,{style:{margin:"2px"},onClick:function(e){return t.canvas.current.undoOnce()}},"Undo"),o.a.createElement(y.a,{style:{margin:"2px"},onClick:function(e){return t.canvas.current.redoOnce()}},"Redo")),Object.entries(this.nodeRegistry.nodeTypes).map((function(t){var e=Object(p.a)(t,2),n=e[0],r=e[1];return o.a.createElement(He,{key:n,name:r.Name,details:{nodeType:n}})}))),o.a.createElement(m.a,{md:!0},o.a.createElement(ye,{ref:this.canvas,resolver:this.resolver}))))}}]),n}(o.a.Component),Ue=(n(156),n(165)),Ve=n(77),Ge=function(){return o.a.createElement(Ue.a,{backend:Ve.a},o.a.createElement(qe,null))};s.a.render(o.a.createElement(Ge,null),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.33ca6457.chunk.js.map